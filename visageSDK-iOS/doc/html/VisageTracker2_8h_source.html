<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>visageSDK: VisageTracker2.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">visageSDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a01466e66bf37d3c9e7eff0198e4bb6a.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">VisageTracker2.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#ifndef __VisageTracker2_h__</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define __VisageTracker2_h__</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#ifdef VISAGE_STATIC</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    #define VISAGE_DECLSPEC</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">    #ifdef VISAGE_EXPORTS</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor"></span><span class="preprocessor">        #define VISAGE_DECLSPEC __declspec(dllexport)</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    #else</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor"></span><span class="preprocessor">        #define VISAGE_DECLSPEC __declspec(dllimport)</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;FbaAction.h&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;FAPs.h&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;FBFT/FBFT.h&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;TrackerOpenGLInterface.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;TrackerGUIInterface.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;TrackerInternalInterface.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;SmoothingFilter.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;VisageTrackerObserver.h&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//#include &quot;VisageFeaturesDetector.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;VisageTrackerFrameGrabber.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;TrackingData.h&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;VisageDetector.h&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;TrackerGazeCalibrator.h&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//#include &quot;Estimator6P.h&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;VisageEstimator.h&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;Estimator.h&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;EstimatorGauss.h&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//#include &quot;IVTFilter.h&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor"></span><span class="keyword">class </span>videoInput;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef IOS</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor"></span><span class="keyword">namespace </span>VisageSDK</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">class </span>iOSCapture;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#ifdef MAC_OS_X</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor"></span><span class="keyword">namespace </span>VisageSDK</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">class </span>OSXCapture;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#ifdef ANDROID</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    VISAGE_DECLSPEC <span class="keywordtype">void</span> _loadVisageVision();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#ifndef WIN32</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;pthread.h&gt;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#define HANDLE pthread_t*</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">namespace </span>VisageSDK</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#define TRACK_STAT_OFF 0</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define TRACK_STAT_OK 1</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define TRACK_STAT_RECOVERING 2</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define TRACK_STAT_INIT 3</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#define VISAGE_CAMERA_UP 0</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define VISAGE_CAMERA_DOWN 1</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define VISAGE_CAMERA_LEFT 2</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define VISAGE_CAMERA_RIGHT 3</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">class </span>ModelFitter;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="code" href="classVisageSDK_1_1VisageTracker2.html">  235</a></span>&#160;<span class="keyword">class </span>VISAGE_DECLSPEC <a class="code" href="classVisageSDK_1_1VisageTracker2.html" title="VisageTracker2 is a head/facial features tracker capable of tracking facial features in video coming ...">VisageTracker2</a> : <span class="keyword">public</span> FbaAction</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="classVisageSDK_1_1VisageTracker2.html" title="VisageTracker2 is a head/facial features tracker capable of tracking facial features in video coming ...">VisageTracker2</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* trackerConfigFile);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="classVisageSDK_1_1VisageTracker2.html" title="VisageTracker2 is a head/facial features tracker capable of tracking facial features in video coming ...">VisageTracker2</a>(<a class="code" href="classVisageSDK_1_1TrackerOpenGLInterface.html" title="Optional OpenGL Interface for VisageTracker2.">TrackerOpenGLInterface</a> *oglInterface, <a class="code" href="classVisageSDK_1_1TrackerGUIInterface.html" title="Optional GUI Interface for VisageTracker2.">TrackerGUIInterface</a> *guiInterface, <span class="keyword">const</span> <span class="keywordtype">char</span>* trackerConfigFile);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    ~<a class="code" href="classVisageSDK_1_1VisageTracker2.html" title="VisageTracker2 is a head/facial features tracker capable of tracking facial features in video coming ...">VisageTracker2</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordtype">bool</span> trackFromCam(<span class="keyword">const</span> <span class="keywordtype">char</span>* outFbaFileName = NULL, <span class="keywordtype">int</span> orientation = VISAGE_CAMERA_UP, <span class="keywordtype">int</span> frameGrabberImageFormat = VISAGE_FRAMEGRABBER_FMT_RGB);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">bool</span> trackFromVideo(<span class="keyword">const</span> <span class="keywordtype">char</span>* inVideoFileName,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                      <span class="keyword">const</span> <span class="keywordtype">char</span>* outFbaFileName = NULL);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">bool</span> trackFromAvi(<span class="keyword">const</span> <span class="keywordtype">char</span>* inAviFileName,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                      <span class="keyword">const</span> <span class="keywordtype">char</span>* outFbaFileName = NULL);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordtype">bool</span> trackFromRawImages(<a class="code" href="classVisageSDK_1_1VisageTrackerFrameGrabber.html" title="VisageTrackerFrameGrabber interface.">VisageTrackerFrameGrabber</a> *frameGrabber,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                            <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keywordtype">int</span> format, <span class="keywordtype">int</span> origin,</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">char</span>* outFbaFileName = NULL);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">int</span> getTrackingData(<a class="code" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results.">FaceData</a> *data);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">    * This method fills the gven face data structure and returns the tracking status.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">    * On first call of this function the memory for the required member variables of the passed object will be allocated and initialized automatically.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">    * @param Face data structure that will be filled with current tracking data</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">    * @return tracking status (TRACK_STAT_OFF, TRACK_STAT_OK, TRACK_STAT_RECOVERING and TRACK_STAT_INIT, see @ref TrackingData for more details)</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordtype">int</span> getFaceData(<a class="code" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results.">FaceData</a> *data);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordtype">void</span> setTrackerConfigurationFile(<span class="keywordtype">char</span>* trackerConfigFile);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">/* Is tracker active?</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">    * This function is deprecated; please use @ref getTrackingStatus().</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">    * Checks whether the tracker is currently active.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">    * @return true if tracker is currently active, false otherwise.</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordtype">bool</span> isActive() {<span class="keywordflow">return</span> this-&gt;active;};</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">/* Is tracker correctly tracking the face?</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">    * This function is deprecated; please use @ref getTrackingStatus().</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">    * Checks whether the tracker is currently tracking the face.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">    * @return true if tracker is currently tracking the face correctly, false if the tracker can currently not detect the face.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordtype">bool</span> isTrackingOK() {<span class="keywordflow">return</span> this-&gt;tracking_ok;};</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="code" href="classVisageSDK_1_1VisageTracker2.html#abd95ebff358b73527a107e9c81c2cb5f">  471</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classVisageSDK_1_1VisageTracker2.html#abd95ebff358b73527a107e9c81c2cb5f" title="Attaches an observer implementation to the tracker.">attach</a>(<a class="code" href="classVisageSDK_1_1VisageTrackerObserver.html" title="VisageTrackerObserver interface.">VisageTrackerObserver</a> * _obs) {obs[nObs++] = _obs;};</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="code" href="classVisageSDK_1_1VisageTracker2.html#a8af56d31d87e706df6fa45bc702a03d6">  480</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classVisageSDK_1_1VisageTracker2.html#a8af56d31d87e706df6fa45bc702a03d6" title="Detaches all attached observers from the tracker.">detach</a>() {nObs = 0;};</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">/* Get facial feature points estimated by the tracker.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">    * The feature points are identified</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">    * according to the MPEG-4 standard, so each feature point is identified by its group and index. For example, the tip of the chin</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">    * belongs to group 2 and its index is 1, so this point is identified as point 2.1. The identification of all MPEG-4 feature points is</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">    * illustrated in Figure 2 on Page 8 of the &lt;a href=&quot;../MPEG-4 FBA Overview.pdf&quot;&gt;MPEG-4 Face and Body Animation Introduction&lt;/a&gt;.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">    * Certain feature points, like the ones on the tongue and teeth, can not be reliably detected so they are not returned</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">    * and their coordinates are always set to zero. These points are:</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">    * 3.5, 3.6, 6.1, 6.2, 6.3, 6.4, 7.1, 9.8, 9.9, 9.10, 9.11, 10.1, 10.2, 10.3, 10.4, 10.5, 10.6, 11.4, 11.5, 11.6</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">    * Several other points are estimated, rather than accurately detected, due to their specific locations. Examples of such points</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">    * are 11.4 (usually hidden in the hair), hairline points (10.1 - 10.3) as well as cheeck points 5.1 - 5.4 which can not be precisely defined due to lack of</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">    * features on the cheek.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">    * The resulting feature point coordinates are returned in form of an FDP object. This is a container clas used for storage of MPEG-4 feature points.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">    * It provides functions to access each feature point by its group and index and to read its coordinates. Note that FDP can store 3D points but</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">    * in case of 2D return feature points only the x and y coordinates of each point are used.</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">    * In case of absolute 3D coordinates (relative = false), the coordinate system is such that when looking towards the video image, the direction of x is to the</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">    * left, y iz up, and z points into the image, away from the viewer. The global origin (0,0,0) is placed at the camera.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">    * In case of relative 3D coordinates (relative = true), the coordinate system is such that when looking towards the video image, the direction of x is to the</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">    * right, y iz up, and z points out of the image, towards the viewer. The  origin (0,0,0) is placed at the left eye of the person (i.e. the eye that is on the right in the image).</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">    * The 2D coordinates are normalised to image size so that the lower left corner of the image has coordinates 0,0 and upper right corner 1,1.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">    * @param initial if true, function returns the feature points from the initial frame of video, otherwise it returns the latest estimated points.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">    * @param relative if true, function returns the coordinates relative to the head (i.e. coordinates in the coordinate system of the head), otherwise it returns global coordinates. this parameter is ignored if 2D coordinates are requested.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">    * @param _3D if true, the function returns 3D coordinates of feature points. Otherwise, it returns 2D coordinates normalised to image size so that the upper left corner of the image has coordinates 0,0 and lower right corner 1,1.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *getFeaturePoints(<span class="keywordtype">bool</span> initial, <span class="keywordtype">bool</span> relative, <span class="keywordtype">bool</span> _3D);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">/* Draw the tracking results.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">    * Visualize the most recent tracking results in the current OpenGL window.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordtype">void</span> drawResults();</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">//helper functions for drawResults()</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordtype">void</span> drawPoint(<span class="keywordtype">int</span> i,<span class="keywordtype">int</span> j);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordtype">void</span> drawPoint3D(<span class="keywordtype">int</span> i,<span class="keywordtype">int</span> j);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">void</span> drawPoints2D(<span class="keywordtype">int</span> *points, <span class="keywordtype">int</span> num, <span class="keywordtype">int</span> drawType);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordtype">void</span> drawPoints3D(<span class="keywordtype">int</span> *points, <span class="keywordtype">int</span> num, <span class="keywordtype">int</span> drawType);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">/* Get the current frame rate.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">    * This function returns the frame rate of the tracker, in frames per second,</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">    * measured ovber last 10 frames.</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">    * @return The measured tracking frame rate, in frames per second.</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordtype">float</span> getFrameRate() {<span class="keywordflow">if</span>(active) <span class="keywordflow">return</span> trackingFrameRate; <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0.0f;};</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">/* Get the current tracking status.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">    * Returns the current status of the tracker, which can be one of the following:</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">    * &lt;table&gt;</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">    * &lt;tr&gt;&lt;td width=&quot;100&quot;&gt;&lt;b&gt;RETURN VALUE&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;DESCRIPTION&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">    * &lt;tr&gt;&lt;td&gt;TRACK_STAT_OFF&lt;/td&gt;&lt;td&gt;Tracker is not active, i.e. it has not yet been started, or it has been stopped.&lt;/td&gt;&lt;/tr&gt;</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">    * &lt;tr&gt;&lt;td&gt;TRACK_STAT_OK&lt;/td&gt;&lt;td&gt;Tracker is tracking normally.&lt;/td&gt;&lt;/tr&gt;</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">    * &lt;tr&gt;&lt;td&gt;TRACK_STAT_RECOVERING&lt;/td&gt;&lt;td&gt;Tracker has lost the face and is attempting to recover and continue tracking. If it can not recover within the time defined by the parameter recovery_timeout in the tracker configuration file, the tracker will fully re-initialize (i.e. it will assume that a new user may be present).&lt;/td&gt;&lt;/tr&gt;</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">    * &lt;tr&gt;&lt;td&gt;TRACK_STAT_INIT&lt;/td&gt;&lt;td&gt;Tracker is initializing. The tracker enters this state immediately when it is started, or when it has lost the face and failed to recover (see TRACK_STAT_RECOVERING above). The initialization process is configurable through a number of parameters in the tracker configuration file.&lt;/td&gt;&lt;/tr&gt;</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">    * &lt;/table&gt;</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">    * When the status is TRACK_STAT_INIT, the method returns additional initialization status information through its arguments (for other states the arguments are neither used nor modified by the method).</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">    * The purpose of this is to display the initialization status on the screen in order to aid the user in positioning their face in the best pose for initialization.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">    * When the status is TRACK_STAT_OK, the method returns an additional tracking quality information through its track_quality argument (for other states the argument is neither used nor modified by the method).</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">    * @param display_status Output argument; set only while tracker is initializing. It indicates whether the display of initialization status is enabled or disabled by the init_display_status parameter in the tracker configuration file. If it is true, initialization status should be displayed. This allows the display to be controlled from the configuration file.</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">    * @param face_detected Output argument; set only while tracker is initializing. It returns true if a face and its main features are currently detected, false otherwise. If this value is false, no values are set for yaw, roll and velocity.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">    * @param yaw Output argument; set only while tracker is initializing. It returns a measure of head yaw (left-right rotation of the head). It is expressed in meters, as the deviation of the nose tip position from the imaginary line drawn between the eyes perpendicular to left eye - right eye connecting line. Positive values are to the user&#39;s right (i.e. to the left in the image).</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">    * @param roll Output argument; set only while tracker is initializing. It returns head roll (tilt of the head to left or right). It is expressed in degrees. Positive values are to the user&#39;s left (i.e. to the right in the image).</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">    * @param velocity Output argument; set only while tracker is initializing. It returns the estimated velocity of nose tip motion, in meters per second.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">    * @param track_quality Output argument; set only while tracker is tracking (TRACK_STAT_OK). It returns the estimate of tracking quality level for the current frame. The value is between 0 and 1, and it corresponds to the global_bad_match_threshold parameter in the tracker configuration file, i.e. the quality measure is checked against this threshold and when it falls below the tracker resets itself.</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">    * @return The current status of the tracker, see table above.</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordtype">int</span> getTrackingStatus(<span class="keywordtype">bool</span> &amp;display_status, <span class="keywordtype">bool</span> &amp;face_detected, <span class="keywordtype">float</span> &amp;yaw, <span class="keywordtype">float</span> &amp;roll, <span class="keywordtype">float</span> &amp;velocity, <span class="keywordtype">float</span> &amp;track_quality);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">/* Get the tracker image resolution.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">    * This function returns the resolution of tracker input image, working image and display.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">    * The input resolution is the resolution of the input video file or camera.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">    * Depending on the configuration file, the tracker may reduce the input image to working resolution.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">    * Finally, the display resolution is the resolution of the image presented in the application window; this resolution is also set in the configuration file.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">    * @param ix returns the horizontal input resolution.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">    * @param iy returns the vertical input resolution.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">    * @param wx returns the horizontal work resolution.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">    * @param wy returns the vertical work resolution.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">    * @param dx returns the horizontal display resolution.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">    * @param dy returns the vertical display resolution.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordtype">void</span> getResolution(<span class="keywordtype">int</span> &amp;ix, <span class="keywordtype">int</span> &amp;iy, <span class="keywordtype">int</span> &amp;wx, <span class="keywordtype">int</span> &amp;wy, <span class="keywordtype">int</span> &amp;dx, <span class="keywordtype">int</span> &amp;dy);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">/* Get the rotation of the face (head).</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">    * This function returns the estimated rotation of the head, in radians.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">    * It can return either the initial rotation (the rotation the first frame</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">    * of the video) or the current rotation.</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">    * Rotation is expressed with three values determining the rotations</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">    * around the three axes x, y and z, in radians. This means that the values represent</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">    * the pitch, yaw and roll of the head, respectively. The zero rotation</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">    * (values 0, 0, 0) corresponds to the face looking straight ahead.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">    * Positive values for pitch correspond to head turning down.</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">    * Positive values for yaw correspond to head turning left (from its own perspective).</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">    * Positive values for roll correspond to head rolling to the right (from its own perspective).</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">    * The values are in radians.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">    * @param initial if true, the function returns initial rotation; otherwise it returns the current rotation.</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">    * @return pointer to the array with the rotation values around x, y and z axes (yaw, pitch and roll).</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordtype">float</span> *getFaceRotation(<span class="keywordtype">bool</span> initial);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">/* Get the translation of the face (head).</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">    * This function returns the current estimated translation of the head,</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">    * either relative to its initial position in the first video frame or absolute (i.e. relative to the camera position).</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">    * A typical application using relative translation is character animation, while absolute translation is usefull for example in AR type of applications.</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">    * Translation is expressed with three coordinates x, y, z.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">    * When looking towards the video image, the direction of x is to the</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">    * left, y iz up, and z points forward into the image.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">    * If relative is TRUE, the function returns the translation of the head relative to its</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">    * position in the first video frame. The coordinates are normalised with respect to the eye separation</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">    * distance of the tracked face. This means that the value of 1</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">    * corresponds to the translation equal to the distance between the</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">    * person&#39;s eyes.</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">    * If relative is TRUE, the function can return compensated or uncompensated</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">    * translation depending on the value of the parameter compensated.</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">    * Uncompensated translation is the raw translation estimated by the tracker.</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">    * Compensated translation values take into account the fact that the tracker</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">    * uses a relatively flat face model for tracking, so the center of rotation of this model</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">    * is in the front area of the head, while the anatomical center</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">    * of rotation is behind, in the base of the neck. Therefore, when the rotation</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">    * is applied to a 3D head model with anatomically correct center of rotation, the</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">    * face naturally translates as well. When this translation is compounded with</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">    * the translation values obtained from the tracker, the total resulting translation</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">    * is exaggerated. To avoid this exaggerated translation of the animated head,</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">    * the translation can be compensated. The compensation algorithm</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">    * estimates how much the translation would be exaggerated, and makes it that much</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">    * smaller. The compensated translation can directly be applied to animated head</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">    * models that use the neck base as the center of rotation, and is expected to give</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">    * better results than the uncompensated translation. The compensation can be fine-tuned</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">    * using the @ref translation_compensation_factor attribute.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">    * If relative is FALSE, the function returns the position of the head</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">    * relative to the camera, i.e. the absolute head position in the camera space. The parameter &quot;compensated&quot;</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">    * is ignored.</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">    * If the value set for the camera</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">    * focal length in the &lt;a href=&quot;doc/VisageTracker Configuration Manual.pdf&quot;&gt;tracker configuration&lt;/a&gt; file</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">    * corresponds to the real camera used the scale of the coordinates shall be correct, in meters; otherwise the scale of the translation values is not known, but the relative values are still correct (i.e. moving towards the camera results in negative values of z coordinate).</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">    * The absolute translation, rotation returned by getFaceRotation() and the camera focus value FBFT::f together form the 3D coordinate system of the head in its current position</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">    * and they can be used to align 3D rendered objects with the head for AR or similar applications. The relative facial feature coordinates returned by getFeaturePoints()</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">    * can be used to align rendered 3D objects to the specific features of the face, like putting virtual eyeglasses on the eyes.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">    * @param relative if true, function returns relative translation from the position in the initial video frame; otherwise it returns absolute translation (from the camera).</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">    * @param compensated if true, and if &quot;relative&quot; is also true, function returns compensated translation, otherwise it returns uncompensated translation.</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">    * @return pointer to the array with the x, y, z translation values.</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">    * @see translation_compensation_factor</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">    * @see getFaceRotation()</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">    * @see getFeaturePoints()</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">    * @see FBFT</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordtype">float</span> *getFaceTranslation(<span class="keywordtype">bool</span> relative, <span class="keywordtype">bool</span> compensated);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">/* Get the textured 3D model of the face (head) in current pose.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">    * This method is currently experimental and has not been fully tested.</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">    * This method returns the 3D model internally used by the tracker. The model is fitted in 3D to the</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">    * face in the current video frame. The model is a single textured 3D triangle mesh.</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">    * The texture of the model is the current video frame. This means that, when the model is drawn using the correct</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">    * perspective (defined by focal length f, image width and height and model rotation and translation), it exactly recreates the facial part of the image. This can be used, for example, to</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">    * cut out the face from the rest of the image (NOTE: if this is the desired effect, the model with closed mouth should be used otherwise when the mouth opens a hole appears.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment">    * The model candide3-ClosedMouth.wfm is provided for this purpose and should simply be specified instead of the default Candide3.wfm in the model_filename statement in the tracker configuration file).</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">    * There are multiple potential uses for this function. Some ideas include, but are not limited to:</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">    * - Draw the model into the Z buffer to achieve correct occlusion of virtual objects by the head in AR applications.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">    * - Use texture coordinates to cut out the face from the image.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">    * - Draw the 3D model from a different perspective than the one in the actual video.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">    * - Insert the model into another video or 3D scene.</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">    * Note that smoothing parameters are not applied to any values returned by this function.</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">    * @param trans 3D translation of the head (equivalent to calling getFaceTranslation(false, false) except that this function returns original values without any smoothing, while getFaceTranslation() returns smoothed values if smoothing filter is on).</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">    * @param rot 3D rotation of the head (equivalent to calling getFaceRotation(false) except that this function returns original values without any smoothing, while getFaceTranslation() returns smoothed values if smoothing filter is on).</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">    * @param f Camera focal lenght, to be used in setting the perspective if the 3D model has to be rendered correctly aligned with current video image.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">    * @param img_width Width of the current video image, which is also the texture for the 3D model.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">    * @param img_height Height of the current video image, which is also the texture for the 3D model.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">    * @param tex_img The current video image, which is also the texture for the 3D model. IplImage is the image storage class from OpenCV, please refer to OpenCV documentation for details of accessing its data members; the basic members are the size of the image (frame-&gt;width, frame-&gt;height) and the pointer to the actual pixel data of the image (frame-&gt;imageData).</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">    * @param n_vert Number of vertices in the 3D model.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">    * @param vert List of vertex coordinates of the 3D model, x y and z coordinate for each vertex.</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">    * @param n_tri Number of triangles in the model.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">    * @param tri Triangles list Each triangle is described by three indices into the list of vertices vert. Counter-clockwise convention is used for normals direction.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">    * @param tex_coord Texture coordinates for the model, a pair of u, v coordinates for each vertex.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">    * @return true on success, false if the model can not be returned because the tracker is not active or the face is currently not detected in the video frame.</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">    * @see getFaceTranslation(), getFaceRotation), VisageSDK::FBFT::f</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordtype">bool</span> getFaceModel(<span class="keyword">const</span> <span class="keywordtype">float</span>* &amp;trans, <span class="keyword">const</span> <span class="keywordtype">float</span>* &amp;rot, <span class="keywordtype">float</span> &amp;f, <span class="keywordtype">int</span> &amp;img_width, <span class="keywordtype">int</span> &amp;img_height, <span class="keyword">const</span> IplImage* &amp;tex_img, <span class="keywordtype">int</span> &amp;n_vert, <span class="keyword">const</span> <span class="keywordtype">float</span>* &amp;vert,<span class="keywordtype">int</span> &amp;n_tri, <span class="keyword">const</span> <span class="keywordtype">int</span>* &amp;tri, <span class="keyword">const</span> <span class="keywordtype">float</span>* &amp;tex_coord);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">/* Get the current video frame.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">    * IplImage is the image storage class from OpenCV, please refer to OpenCV documentation for details of accessing its data members; the basic members are the size of the image (frame-&gt;width, frame-&gt;height) and the pointer to the actual pixel data of the image (frame-&gt;imageData).</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">    * @return pointer to the current video frame, or NULL if tracker is not active.</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;     <span class="keyword">const</span> IplImage *getCurrentVideoFrame(){<span class="keywordflow">return</span>(isActive() ? (<span class="keyword">const</span> IplImage *)frame_input : NULL);};</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">    * Set the upper and lower limit for each of Facial Animation Parameters, i.e., the maximum and minimum allowed values for</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">    * each of the 68 FAPs. The tracker will cut off any values outside these limits.</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">    * Initially it is set to a very large range so the limits will not be reached in practice.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">    *</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">    * @param upperLimit pointer to the FAPs object containing the upper FAP limits</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">    * @param lowerLimit pointer to the FAPs object containing the lower FAP limits</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">    * @see getUpperFAPLimits(), getLowerFAPLimits()</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordtype">void</span> setFAPLimits(FAPs *upperLimit, FAPs *lowerLimit);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">    * Returns the pointer to the FAPs object containing the upper FAP limits</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">    * @return the upper FAP limits.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    FAPs *getUpperFAPLimits();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">    * Returns the pointer to the FAPs object containing the lower FAP limits.</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">    * See setFAPLimits() for details regarding the FAP limitation mechanism.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">    * @return the lower FAP limits.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    FAPs *getLowerFAPLimits();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordtype">void</span> setIPD(<span class="keywordtype">float</span> value);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordtype">float</span> getIPD();</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordtype">bool</span> DetectStrip(<span class="keywordtype">double</span> &amp;size);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordtype">void</span> InitOnlineGazeCalibration();</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordtype">void</span> AddGazeCalibrationPoint(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordtype">float</span> FinalizeOnlineGazeCalibration();</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordtype">void</span> InitOfflineGazeCalibration(ScreenSpaceGazeRepository* calibrator);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordtype">float</span> getGazeEstimations(ScreenSpaceGazeRepository* repository);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordtype">bool</span> showCameraSettingsDialog();</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    FBAPs *getFBAPs(<span class="keywordtype">long</span> globalTime, FBAPs *lastFBAPs, VisageCharModel* model);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordtype">void</span> start(<span class="keywordtype">long</span> globalTime);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordtype">void</span> stop();</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00878"></a><span class="lineno"><a class="code" href="classVisageSDK_1_1VisageTracker2.html#a53765c77a7a5df057d9874abb48e6e92">  878</a></span>&#160;    <span class="keywordtype">char</span>* <a class="code" href="classVisageSDK_1_1VisageTracker2.html#a53765c77a7a5df057d9874abb48e6e92" title="Action name (FbaAction implementation).">actionTypeName</a>() {<span class="keywordflow">return</span> <span class="stringliteral">&quot;VisageTracker2&quot;</span>;};</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordtype">void</span> SetScalingFactor(<span class="keywordtype">float</span> factor);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordtype">void</span> SetEstimatorGaze(<span class="keywordtype">bool</span> state);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordtype">void</span> SetGazeOffset(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordtype">void</span> SetGazeScale(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordtype">void</span> SetGazeViewportSize(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordtype">void</span> reset();</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">bool</span> doReset;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordtype">void</span> SetGazeCenter(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="preprocessor">#ifdef IOS</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordtype">void</span> setDataBundle(NSBundle *bundle);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="classVisageSDK_1_1TrackerOpenGLInterface.html" title="Optional OpenGL Interface for VisageTracker2.">TrackerOpenGLInterface</a> *oglIface;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="classVisageSDK_1_1TrackerOpenGLInterface.html" title="Optional OpenGL Interface for VisageTracker2.">TrackerOpenGLInterface</a> *tmpOglIface;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <a class="code" href="classVisageSDK_1_1TrackerGUIInterface.html" title="Optional GUI Interface for VisageTracker2.">TrackerGUIInterface</a> *guiIface;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    TrackerInternalInterface *internalIface;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordtype">void</span> display_func();</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="comment">//read scale and shape units from file</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">void</span> read_profile (</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;filename</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        );</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">//write scale and shape units to file</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordtype">void</span> write_profile (</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> &amp;filename</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        );</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment">//write scale and shape units to file, using the current file name</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordtype">void</span> write_profile (</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        );</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordtype">int</span> auto_init; <span class="comment">/* Control the automatic initialisation. 0 = semi-automatic initialisation of the tracker; 1 = fully automatic tracking with fast initialisation. Initially it is set through the &lt;a href=&quot;doc/VisageTracker Configuration Manual.pdf&quot;&gt;tracker configuration&lt;/a&gt; file.*/</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordtype">int</span> manual_face_detection; <span class="comment">/* When set to 1, the tracker disables the automatic detection of the face during the tracking initialization and instead it presents the image to the user and asks the user to click on the eyes,nose tip and mouth corners. This is used for videos in which automatic face detection does not work, so tracking can not start; manually picking the face allows the tracker to initialise and then it continues tracking. For example, this is the case with thermal videos and sometimes with videos where the face wears some painted markers; it has sometimes happened with videos of old people.</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">The function for manual feature picking is implemented through the TrackerGUIInterface abstract interface class; it is provided with full source code and developers can modify or replace it wih different picking methods, or even with their own automatic detection method. If this option is set to 0, automatic face detection is used. Initially it is set through the &lt;a href=&quot;#config&quot;&gt;tracker configuration file&lt;/a&gt;.*/</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordtype">float</span> init_pose_dev; <span class="comment">/* Allowed deviation from ideal initialisation pose. This value is used only in automatic initialisation mode. It controls the level of quality of the head pose that triggers the initialisation of the tracker. The value of 0 means the tracker will require the best head pose before it starts; higher values relay the requirements.*/</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordtype">float</span> init_yaw_threshold; <span class="comment">/* This value is used during automatic initialisation or, in manual initialization mode while the tracker initially searches for the best frame on which to perform initialization. It controls the amount of yaw (left-right rotation of the head) allowed at initialisation; the tracker waits until the head pose is within this limit before it initialises and starts tracking. The value of 0 means the tracker will require perfectly frontal head pose before it starts (it is not recommended to set it to 0 because the tracker may then never start); higher values relax the requirements.*/</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordtype">float</span> init_roll_threshold; <span class="comment">/* This value is used during automatic initialisation or, in manual initialization mode while the tracker initially searches for the best frame on which to perform initialization. It controls the amount of roll (tilt of the head) allowed at initialisation; the tracker waits until the head pose is within this limit before it initialises and starts tracking. The value of 0 means the tracker will require perfectly frontal head pose before it starts (it is not recommended to set it to 0 because the tracker may then never start); higher values relax the requirements. */</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordtype">float</span> init_velocity_threshold; <span class="comment">/* This value is used only in automatic initialisation mode. It controls the speed of head movement allowed at initialisation; the tracker waits until the head stabilises below this speed limit before it initialises and starts tracking. It is expressed in meters per second. The value of 0 means the tracker will require perfectly still head before it starts (it is not recommended to set it to 0 because the tracker may then never start); higher values relax the requirements. */</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordtype">float</span> init_timeout; <span class="comment">/* This value is used only in automatic initialisation mode. It controls the time allowed at initialisation, in milliseconds. If the desired head pose was not found during this time, the tracker chooses the best available image seen during this time. The timing starts from the moment when face is detected.*/</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordtype">int</span> init_timeout_enable; <span class="comment">/* This value is used during automatic initialisation or, in manual initialization mode while the tracker initially searches for the best frame on which to perform initialization. It enables or disables the initialization timeout mechanism; when it is disabled, the parameter init_timeout (see above) is ignored and initialization continues until the desired head pose is reached. The setting is separate for camera, video file and raw image input modes and determined by the first, second and third bit of the value, respectively. Thus value 1 means that the timeout mechanism is enabled when tracking from camera; 2 means it is enabled when tracking from video file; 4 means it is enabled when using the raw image interface and 0 means it is always disabled; combinations are allowed, e.g. 6 enables timeout in video and raw image input modes.*/</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordtype">int</span> init_display_status; <span class="comment">/* This value is used during automatic initialisation or, in manual initialization mode while the tracker initially searches for the best frame on which to perform initialization. It enables or disables the initialization status display. When enabled, the initialization status is displayed interactively on the screen during initialization in order to help the user to position the head. The setting is separate for camera, video file and raw image input modes and determined by the first, second and third bit of the value, respectively. Thus value 1 means that the display is enabled when tracking from camera; 2 means it is enabled when tracking from video file; 4 means it is enabled when using the raw image interface and 0 means it is always disabled; combinations are allowed, e.g. 6 enables display in video and raw image input modes.*/</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordtype">float</span> recovery_timeout; <span class="comment">/* This value is used only in automatic initialisation mode. It is used when the tracker looses the face and can not detect any face in the frame. This value tells the tracker how long it should wait before considering that the current user is gone and initialising the full re-initialisation procedure.  If the face is detected before this time elapses, the tracker considers that it is the same person and it recovers, i.e. continues tracking it using the previous settings. The time is expressed in milliseconds. */</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordtype">bool</span> display_video; <span class="comment">/* Toggle video display on/off; initially it is set through the&lt;a href=&quot;doc/VisageTracker Configuration Manual.pdf&quot;&gt;tracker configuration&lt;/a&gt; file and usually it is on, so video will be visible while tracking. */</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordtype">bool</span> display_model_texture; <span class="comment">/* Toggle model texture display on/off; initially it is set through the &lt;a href=&quot;doc/VisageTracker Configuration Manual.pdf&quot;&gt;tracker configuration&lt;/a&gt; file. */</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordtype">bool</span> display_tri_mask; <span class="comment">/* Toggle triangle mask display on/off (triangle mask determines where track points are looked for); initially it is set through the &lt;a href=&quot;doc/VisageTracker Configuration Manual.pdf&quot;&gt;tracker configuration&lt;/a&gt; file. */</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordtype">bool</span> display_model_wireframe; <span class="comment">/* Toggle wireframe model display on/off; initially it is set through the &lt;a href=&quot;#config&quot;&gt;tracker configuration file&lt;/a&gt;. */</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordtype">int</span> display_results; <span class="comment">/* Control the display of tracking results. 0 = no results display; 1 = display tracked feature points; 2 = display head pose; 4 = display eye locations; values can be added together (e.g. 6 = display head pose and eye locations). Initially it is set through the &lt;a href=&quot;doc/VisageTracker Configuration Manual.pdf&quot;&gt;tracker configuration&lt;/a&gt; file. */</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordtype">bool</span> display_track_points; <span class="comment">/* Toggle the display of track points on/off (track points are automatically found points in the face that are suitable for tracking - they are not the same as feature points and their display is mainly useful for monitoring the functioning of the tracker); initially it is set through the &lt;a href=&quot;#config&quot;&gt;tracker configuration file&lt;/a&gt;.. */</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordtype">float</span> translation_compensation_factor; <span class="comment">/* Compensation factor for translation results. Default value is 1.0. Bigger values result in more compensation being applied. If it is set to 0, no compensation is applied. For details about translation compensation see getFaceTranslation()*/</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordtype">int</span> smoothing_translation; <span class="comment">/* Smoothing value for translation results. It must be set between 0 (no smoothing) and 10 (maximal smoothing). Initially it is set through the &lt;a href=&quot;doc/VisageTracker Configuration Manual.pdf&quot;&gt;tracker configuration&lt;/a&gt; file.. Smoothing reduces tracking noise and makes results smoother but it introduces delay so it should be used with caution.*/</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordtype">int</span> smoothing_rotation; <span class="comment">/* Smoothing value for rotation results. It must be set between 0 (no smoothing) and 10 (maximal smoothing). Initially it is set through the &lt;a href=&quot;doc/VisageTracker Configuration Manual.pdf&quot;&gt;tracker configuration&lt;/a&gt; file.  Smoothing reduces tracking noise and makes results smoother but it introduces delay so it should be used with caution.*/</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordtype">int</span> smoothing_fp; <span class="comment">/* Smoothing value for feature point results. It must be set between 0 (no smoothing) and 10 (maximal smoothing). Initially it is set through the &lt;a href=&quot;doc/VisageTracker Configuration Manual.pdf&quot;&gt;tracker configuration&lt;/a&gt; file.  Smoothing reduces tracking noise and makes results smoother but it introduces delay so it should be used with caution.*/</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordtype">int</span> video_file_sync; <span class="comment">/* Synchronisation of video playback from file.</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment"> If set to 0, all video frames are processed and displayed so the effective video playback speed</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment"> depends on the available processing power - on a slow computer playback will be slower than real time, while on a fast</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment"> computer it may be faster. If the flag is set to 1 playback is synchronised by</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment"> skipping video frames or introducing delay as needed, so the video file is played at</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"> its normal speed. This may deteriorate tracking results on slower computers because video</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment"> frames are skipped. */</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">// changed to public due to new user interface implementation</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">// TO DO: verify if all this really must be public</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span>FBFT;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    FBFT *fbft; <span class="comment">/* Tracker engine implementation. */</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    IplImage* frame_input; <span class="comment">// Current video frame, input; may be color or grayscale</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    IplImage* frame_gray; <span class="comment">// Current video frame converted to grayscale; all processing is done on grayscale images</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    IplImage* best_frame; <span class="comment">// Frame with best pose found during initialisation; grayscale; used only during initialisation</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    IplImage* gl_image; <span class="comment">// OpenGL window image, used for presenting the video image in the OpenGL window.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    IplImage* gl_image_gray; <span class="comment">// OpenGL window image, grayscale, used for presenting grayscale video image in the OpenGL window.</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordtype">bool</span> PoseTestTimedOut; <span class="comment">//PoseTestTimedOut is set to true if pose test in WaitFrontalPose finished with a timeout or false if pose test found good pose.</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="comment">//Variables used for debugging, usually in batch processing mode from FaceTracker2; if set to -1 they are not used (that is the default)</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordtype">int</span> startFrame; <span class="comment">// start processing video from this frame</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordtype">int</span> endFrame; <span class="comment">// end processing at this frame</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordtype">int</span> slowdownFrame; <span class="comment">//insert pause to slow down for debugging from this frame</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordtype">int</span> slowdownTime;  <span class="comment">// slow down each frame by this time, in milliseconds</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordtype">bool</span> IsAutoStopped; <span class="comment">// reason for stopping</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordtype">float</span> VideoFrameRate;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordtype">int</span> Update(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordtype">void</span> Finish(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordtype">float</span> targetFps;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordtype">int</span> skippedCount;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordtype">int</span> foundCount;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordtype">float</span> videoFps;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordtype">float</span> detectStripAreaThreshold;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordtype">float</span> detectStripPerfectRatio;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordtype">float</span> detectStripRatioThreshold;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordtype">float</span> detectStripAngleThreshold;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordtype">float</span> detectStripRoiYOffset;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordtype">float</span> detectStripRoiWidth;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordtype">float</span> detectStripRoiHeight;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordtype">float</span> bdts_trees_factor;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    SmoothingFilter sf;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="comment">//VisageFeaturesDetector *m_Detector;</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    VisageDetector *m_Detector;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordtype">long</span> getCurrentTimeMs(<span class="keywordtype">bool</span> init);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordtype">bool</span> grabFrame(<span class="keywordtype">bool</span> init);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    IplImage *frame_buffers[3];</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordtype">int</span> a_frame;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordtype">int</span> p_frame;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordtype">int</span> v_frame;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordtype">bool</span> waitFrontalPose(<a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *latestFP,<a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *bestFP, <span class="keywordtype">bool</span> strict,<span class="keywordtype">bool</span> &amp;presenceTest,<span class="keywordtype">bool</span> poseTest,<span class="keywordtype">int</span> parts=VS_FACE);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordtype">bool</span> fitModelToFace(<a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *latestFP,<span class="keywordtype">bool</span> init_tracker);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordtype">bool</span> fitModelToFaceNew(<a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *latestFP, <span class="keywordtype">bool</span> init_tracker, <span class="keywordtype">bool</span> reinit = <span class="keyword">false</span>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordtype">bool</span> verifyPose(<a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *f);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordtype">bool</span> testPose(<a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *f, <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *best);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordtype">bool</span> refitModelToFace();</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordtype">void</span> calculateScreenSpaceGaze();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>  trackInThread(<span class="keywordtype">void</span>* vt);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordtype">void</span> writeBits(FILE *streamHandle, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *bits, <span class="keywordtype">int</span> size);<span class="comment">//void writeBits(int streamHandle, unsigned char *bits, int size);</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> trackInThread2(<span class="keywordtype">void</span>* vt);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordtype">int</span> Init(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordtype">bool</span> testFrontalPose(<a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *latestFP, <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *bestFP,<span class="keywordtype">bool</span>&amp; reco_timeout, <span class="keywordtype">int</span> parts=VS_FACE);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *tmpLatestFP;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *tmpBestFP;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordtype">bool</span> presenceTest;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordtype">int</span> faceLostTime; <span class="comment">//time when face was lost from view</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordtype">int</span> faceFoundTime; <span class="comment">//time when face was detected</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordtype">float</span> bestPoseValue;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordtype">int</span> profile_loaded;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordtype">int</span> trackerState;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordtype">bool</span> debug_frame_pause;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordtype">bool</span> texInited;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="comment">//source video filename</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordtype">char</span> source[500];</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="comment">// frame grabber interface</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="classVisageSDK_1_1VisageTrackerFrameGrabber.html" title="VisageTrackerFrameGrabber interface.">VisageTrackerFrameGrabber</a> *frameGrabber;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordtype">int</span> frameGrabberImageFormat; <span class="comment">//image format for the frame grabber image (RGB, BGR or LUMINANCE)</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordtype">long</span> globalStartTime;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="comment">//interesting FAP groups are 2,3,4,5,8 (actually 1,2,3,4,7 as the counting starts from 0)</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    FBAPs *fbaps; </div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    FBAPs *fbaps0;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a>* fdps;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    FAPs* upperLimits;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    FAPs* lowerLimits;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <a class="code" href="classVisageSDK_1_1VisageTrackerObserver.html" title="VisageTrackerObserver interface.">VisageTrackerObserver</a> *obs[100];</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordtype">int</span> nObs; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="comment">//initial face rotation and translation</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordtype">float</span> init_face_translation[3];</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordtype">float</span> init_face_rotation[3];</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="comment">//face rotation and translation</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordtype">float</span> face_translation_rel[3];</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordtype">float</span> face_translation_abs[3];</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordtype">float</span> face_translation_comp[3];</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordtype">float</span> face_rotation[3];</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordtype">float</span> face_rotation_not_smoothed[3];</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">// values holding the initialization status</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordtype">bool</span> init_face_detected;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordtype">float</span> init_yaw;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordtype">float</span> init_roll;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordtype">float</span> init_velocity;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="comment">//various flags</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">bool</span> active;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">bool</span> inThread;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordtype">bool</span> toFile;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordtype">bool</span> editing; <span class="comment">//used by display function; when true, display function ignores other display flags and displays only the wireframe model for editing</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordtype">bool</span> fitting; <span class="comment">//used by display function to display the wireframe model in different color while face fitting process is on, mainly for debugging purposes</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    HANDLE trackingThreadHandle;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    HANDLE detectorThreadHandle;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    CvCapture* capture;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="preprocessor"></span>    videoInput *VI; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef IOS</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="preprocessor"></span>    iOSCapture *IC;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef MAC_OS_X</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="preprocessor"></span>    OSXCapture *OSXInput;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="preprocessor"></span>     </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordtype">bool</span> tex_too_small; <span class="comment">// video frame dimensions are bigger than max supported tex size</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    CFBAEncoder* fbaEncoder;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    FILE *fbaFileHandle;<span class="comment">//int fbaFileHandle;/*!handle for the FBA file*/</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordtype">char</span> fbaFileName[500];</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> byte;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordtype">int</span> bitcnt;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordtype">string</span> profile_filename;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordtype">string</span> configuration_filename; <span class="comment">//tracker configuration file</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordtype">string</span> configuration_filestring; <span class="comment">//tracker configuration file contents</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordtype">string</span> texture_filename; <span class="comment">// file name for texture (read from profile)</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordtype">string</span> detector_data_path; <span class="comment">// path to the folder containing Haar cascade files</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordtype">int</span> frameCount; <span class="comment">// frame count from beginning of tracking</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordtype">double</span> frameTime; <span class="comment">// duration of one frame in milliseconds</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordtype">long</span> pts; <span class="comment">// presentation time stamp, calculated by grabFrame()</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordtype">long</span> pts_data; <span class="comment">// time stamp</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordtype">int</span> pts_frame;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordtype">float</span> gaze[2]; <span class="comment">//gaze direction</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="preprocessor">#ifdef IOS</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="preprocessor"></span>    NSBundle *dataBundle;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="comment">//stuff copied from main.cpp in Nils&#39; original project</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">bool</span> tracking_ok; <span class="comment">//tracking status OK</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    f32 trackingFrameRate; <span class="comment">// measured tracking frame rate</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    iu32 cam_input; <span class="comment">//0: videoinput library; 1: OpenCV</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    iu32 cam_device; <span class="comment">//camera device number</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    iu32 cam_width; <span class="comment">//camera width</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    iu32 cam_height; <span class="comment">//camera height</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    iu32 gl_width; <span class="comment">//width of opengl display window</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    iu32 gl_height; <span class="comment">//height of opengl display window</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    iu32 cam_fps; <span class="comment">//camera frame rate to set</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    iu32 cam_mirror; <span class="comment">// if 1, flip camera image horizontally to achieve mirror effect</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    iu32 cam_flip; <span class="comment">// if 1, flip camera image vertically</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    iu32 cam_settings; <span class="comment">//if 1, show camera settings dialog</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    iu32 cam_auto; <span class="comment">//if 1, do automatic camera settings when tracking starts</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    IplImage* new_frame; <span class="comment">//any new frames</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordtype">void</span> app_setup();  <span class="comment">// read application settings from configuration file</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordtype">int</span> load_profile(); <span class="comment">// try to load profile, return 1 on success, 0 if profile not found, -1 if profile found but failed to load</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordtype">int</span> cam_orientation;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="comment">//from func_gl.h</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="comment">//clear buffer</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordtype">void</span> gl_clear (</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        );</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="comment">//stuff for calculating FAPs and FDPs</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordtype">float</span> calculateFAPU( <span class="keywordtype">int</span> fapu );</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordtype">void</span> calculateFAPUs();</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordtype">float</span> fapuValue[6];</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordtype">int</span> calculateFAP( <span class="keywordtype">int</span> fap ) ;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordtype">void</span> calculateFAPs( FBAPs* fbaps);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordtype">void</span> calculateFDP(<a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a>* f, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, CvMat* vert, <span class="keywordtype">bool</span> _3D, <span class="keywordtype">bool</span> use_detected_points = <span class="keyword">false</span>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordtype">void</span> setFDPIndices(<a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a>* f);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *featurePoints2D;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *featurePoints3D;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *featurePoints3DR;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *origFeaturePoints2D;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *origFeaturePoints3D;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *origFeaturePoints3DR;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a> *m_bestFP;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    ModelFitter* modelFitter;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordtype">int</span> nFPs; <span class="comment">// number of feature points used for fitting</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordtype">void</span> initTrackingData(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordtype">void</span> swapTrackingData(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordtype">void</span> smoothTrackingData(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordtype">void</span> smoothGazeData(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordtype">void</span> smoothGazeEstimations(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    CvMat *smoothing_factors;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">bool</span> inSwap;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">bool</span> inRead;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">int</span> turn;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <a class="code" href="structVisageSDK_1_1TrackingData.html">TrackingData</a>* trackingData;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="preprocessor">#if defined(IOS) || defined(ANDROID) || defined(MAC_OS_X)</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="preprocessor"></span>    pthread_mutex_t mutex;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="preprocessor"></span>    CRITICAL_SECTION trackingData_cs;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordtype">string</span> bdts_data_path; <span class="comment">// path to the folder containing boosted decision trees</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    VisageDetector* m_DetectorBDFS;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> detectInThread(<span class="keywordtype">void</span>* arg);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">bool</span> inDetectorThread;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">bool</span> stopDetectorThread;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    IplImage* detector_frame;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <a class="code" href="classVisageSDK_1_1FDP.html" title="Feature points of a face.">FDP</a>* detector_fp;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">int</span> facialFeat;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">int</span> detector_parts;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">int</span> detect;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">int</span> new_detector_frame;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordtype">int</span> windowScaler;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    ScreenSpaceGazeRepository* calibrator;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    ScreenSpaceGazeData currentGazeData;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    ScreenSpaceGazeRepository* estimations;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    Estimator* estimator;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    Estimator* fpEstimator;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordtype">int</span> calibFrameCount;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordtype">int</span> calibIndex;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordtype">int</span> startFrameOffset;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordtype">float</span> initGazeX;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordtype">float</span> initGazeY;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    CvMat* projection;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    CvMat* neutral;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;};</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;}</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="preprocessor">#endif // __VisageTracker2_h__</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="preprocessor"></span></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 22 2014 11:17:54 for visageSDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
